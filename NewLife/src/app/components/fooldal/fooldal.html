<!-- Hero Section -->
<section class="hero">
  <app-bubbles></app-bubbles>
  <div class="hero-content">
    <div class="container">
      <h1 class="hero-title" animateOnScroll="fadeInUp" [animationDelay]="200">ÃœdvÃ¶zÃ¶ljÃ¼k az Ãšj Ã‰let Baptista GyÃ¼lekezetben!</h1>
      <p class="hero-subtitle" animateOnScroll="fadeInUp" [animationDelay]="400">GyÃ¶ngyÃ¶s szÃ­vÃ©ben egy kÃ¶zÃ¶ssÃ©g, ahol Isten szeretete Ã©l</p>
      
      <!-- Live Status & Countdown -->
      <div class="hero-status" animateOnScroll="zoomIn" [animationDelay]="600">
        <div *ngIf="isLive()" class="live-indicator">
          <span class="live-badge">ğŸ”´ Ã‰LÅ</span>
          <span>Istentisztelet folyamatban</span>
        </div>
        <div *ngIf="!isLive()" class="countdown-display">
          <span class="countdown-label">KÃ¶vetkezÅ‘ istentisztelet:</span>
          <span class="countdown-time">{{ countdownTimer() }}</span>
        </div>
      </div>
      
      <div class="hero-buttons" animateOnScroll="fadeInUp" [animationDelay]="800">
        <a routerLink="/esemenyek" class="btn btn-primary btn-glow">EsemÃ©nyek</a>
        <a routerLink="/elo-kozvetites" class="btn btn-secondary btn-glow">
          {{ isLive() ? 'ğŸ”´ Ã‰lÅ‘ kÃ¶zvetÃ­tÃ©s' : 'ğŸ“º KÃ¶zvetÃ­tÃ©sek' }}
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Welcome Section -->
<section class="section welcome">
  <div class="container">
    <div class="row">
      <div class="col">
        <h2 class="text-center" animateOnScroll="fadeInDown" [animationDelay]="200">SzabadsÃ¡g Krisztusban</h2>
        <p class="text-center lead" animateOnScroll="fadeInUp" [animationDelay]="400">
          "Ha tehÃ¡t a FiÃº megszabadÃ­t titeket, valÃ³ban szabadok lesztek." - JÃ¡nos 8:36
        </p>
        <p class="text-center" animateOnScroll="fadeInUp" [animationDelay]="600">
          GyÃ¼lekezetÃ¼nk egy meleg, szeretetteljes kÃ¶zÃ¶ssÃ©g GyÃ¶ngyÃ¶sÃ¶n, ahol minden ember 
          megtalÃ¡lhatja helyÃ©t Isten csalÃ¡djÃ¡ban. CÃ©lunk, hogy az evangÃ©lium vilÃ¡gossÃ¡ga 
          Ã¡ltal Ãºj Ã©letet talÃ¡ljunk JÃ©zus Krisztusban.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- Upcoming Events Preview -->
<section class="section upcoming-events">
  <div class="container">
    <h2 class="text-center" animateOnScroll="fadeInDown">KÃ¶zelgÅ‘ esemÃ©nyek</h2>
    
    <!-- Loading state -->
    <div *ngIf="upcomingEvents().length === 0" class="text-center" style="padding: 2rem;">
      <p style="color: #666; font-size: 1.1rem;">ğŸ“… EsemÃ©nyek betÃ¶ltÃ©se...</p>
    </div>
    
    <!-- Events content -->
    <div *ngIf="upcomingEvents().length > 0" class="events-preview">
      <div class="event-card" *ngFor="let event of upcomingEvents()" (click)="openEventModal(event)" animateOnScroll="bounceIn" [animationDelay]="300">
        <div class="event-date">
          <span>{{ formatEventDate(event.date) }}</span>
        </div>
        <div class="event-info">
          <h4>{{ event.title }}</h4>
          <p class="event-description" [innerHTML]="getNewsExcerpt(event.description, 100)"></p>
          <div class="event-meta">
            <span class="location">ğŸ“ {{ event.location }}</span>
            <span class="attendance">ğŸ‘¥ {{ getAttendanceCount(event.id!) }}</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="all-events-link" *ngIf="upcomingEvents().length > 0">
      <a routerLink="/esemenyek" class="btn btn-secondary">Ã–sszes esemÃ©ny megtekintÃ©se â†’</a>
    </div>
  </div>
</section>

<!-- Info Cards -->
<section class="section info-cards">
  <div class="container">
    <div class="cards-grid">
      <div class="card" animateOnScroll="bounceIn" [animationDelay]="200">
        <div class="card-icon">â›ª</div>
        <h3>Istentiszteletek</h3>
        <p>VasÃ¡rnaponkÃ©nt 10:00-tÃ³l vÃ¡rjuk szeretettel a gyÃ¼lekezetet kÃ¶zÃ¶s imÃ¡dsÃ¡gra Ã©s ige hallgatÃ¡sÃ¡ra.</p>
        <a routerLink="/elo-kozvetites" class="card-link">Ã‰lÅ‘ kÃ¶zvetÃ­tÃ©s â†’</a>
      </div>
      
      <div class="card" animateOnScroll="bounceIn" [animationDelay]="400">
        <div class="card-icon">ğŸ‘¥</div>
        <h3>KÃ¶zÃ¶ssÃ©g</h3>
        <p>Kiscsoportos alkalmak, bibliaÃ³rÃ¡k Ã©s kÃ¶zÃ¶ssÃ©gi programok minden korosztÃ¡ly szÃ¡mÃ¡ra.</p>
        <a href="https://discord.gg/gTDUpApNae" target="_blank" rel="noopener noreferrer" class="card-link">Discord kÃ¶zÃ¶ssÃ©g â†’</a>
      </div>
      
      <div class="card" animateOnScroll="bounceIn" [animationDelay]="600">
        <div class="card-icon">ğŸ“–</div>
        <h3>BibliatanulmÃ¡nyozÃ¡s</h3>
        <p>Heti rendszeressÃ©ggel tartott bibliaÃ³rÃ¡k, ahol egyÃ¼tt kutatjuk Isten igÃ©jÃ©t.</p>
        <a routerLink="/esemenyek" class="card-link">EsemÃ©nyek â†’</a>
      </div>
    </div>
  </div>
</section>

<!-- Latest News Preview -->
<section class="section latest-news">
  <div class="container">
    <h2 class="text-center">Legfrissebb hÃ­rek</h2>
    
    <!-- Loading state -->
    <div *ngIf="latestNews().length === 0" class="text-center" style="padding: 2rem;">
      <p style="color: #666; font-size: 1.1rem;">ğŸ“° HÃ­rek betÃ¶ltÃ©se...</p>
    </div>
    
    <!-- News content -->
    <div *ngIf="latestNews().length > 0" class="news-preview">
      <div *ngFor="let newsItem of latestNews()" class="news-preview-card" (click)="openNewsModal(newsItem)">
        <div class="news-content">
          <div class="news-date">{{ formatNewsDate(newsItem.publishedAt) }}</div>
          <h4>{{ newsItem.title }}</h4>
          <p>{{ getNewsExcerpt(newsItem.summary || newsItem.content, 100) }}</p>
          <span class="news-category">
            {{ getCategoryIcon(newsItem.category || 'general') }} {{ getCategoryText(newsItem.category || 'general') }}
          </span>
          <span class="read-more">RÃ©szletek â†’</span>
        </div>
      </div>
    </div>
    
    <div *ngIf="latestNews().length > 0" class="text-center">
      <a routerLink="/hirek" class="btn btn-outline">Ã–sszes hÃ­r megtekintÃ©se â†’</a>
    </div>
  </div>
</section>

<!-- Contact Info -->
<section class="section contact-info">
  <app-bubbles></app-bubbles>
  <div class="container">
    <div class="contact-content">
      <h2 class="text-center">LÃ¡togasson el hozzÃ¡nk!</h2>
      <div class="contact-details">
        <div class="contact-item">
          <strong>ğŸ“ CÃ­m:</strong>
          <span>Ãšj Ã‰let Baptista GyÃ¼lekezet, GyÃ¶ngyÃ¶s, PÃ¡ter Kiss SzalÃ©z u. 14</span>
        </div>
        <div class="contact-item">
          <strong>ğŸ• Istentisztelet:</strong>
          <span>VasÃ¡rnap 10:00</span>
        </div>
        <div class="contact-item">
          <strong>ğŸŒ Online:</strong>
          <span>
            <a href="https://discord.gg/gTDUpApNae" target="_blank" rel="noopener noreferrer" style="color: #429aca;">
              ğŸ’¬ Discord kÃ¶zÃ¶ssÃ©g
            </a>
          </span>
        </div>
      </div>
      <div class="text-center" style="margin-top: 2rem;">
        <a routerLink="/kapcsolat" class="btn btn-primary">KapcsolatfelvÃ©tel</a>
      </div>
    </div>
  </div>
</section>

<!-- News Modal -->
<div *ngIf="showNewsModal()" class="modal-overlay" (click)="closeNewsModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div class="news-meta-header">
        <div class="news-date">{{ formatNewsDate(selectedNews()!.publishedAt) }}</div>
        <span class="news-category">
          {{ getCategoryIcon(selectedNews()!.category || 'general') }} {{ getCategoryText(selectedNews()!.category || 'general') }}
        </span>
      </div>
      <button class="close-btn" (click)="closeNewsModal()">âœ•</button>
    </div>
    
    <div class="modal-body">
      <h1>{{ selectedNews()!.title }}</h1>
      <div class="news-author">ğŸ‘¤ {{ selectedNews()!.author }}</div>
      
      <div class="news-content">
        <img *ngIf="selectedNews()?.imageUrl" 
             [lazyImg]="selectedNews()!.imageUrl!" 
             [alt]="selectedNews()!.title"
             class="news-image"
             (error)="onImageError($event)">
        
        <p *ngIf="selectedNews()!.summary" class="news-summary">{{ selectedNews()!.summary }}</p>
        <div class="news-text">{{ selectedNews()!.content }}</div>
      </div>
    </div>
  </div>
</div>

<!-- Event Modal -->
<div *ngIf="showEventModal()" class="modal-overlay" (click)="closeEventModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div class="event-meta-header">
        <div class="event-date-full">{{ formatEventDate(selectedEvent()!.date) }}</div>
        <span class="event-type">
          {{ getEventTypeIcon(selectedEvent()!.type) }} {{ getEventTypeText(selectedEvent()!.type) }}
        </span>
      </div>
      <button class="close-btn" (click)="closeEventModal()">âœ•</button>
    </div>
    
    <div class="modal-body">
      <h1>{{ selectedEvent()!.title }}</h1>
      <div class="event-location-full">ğŸ“ {{ selectedEvent()!.location }}</div>
      
      <div class="event-details">
        <img *ngIf="selectedEvent()?.imageUrl" 
             [lazyImg]="selectedEvent()!.imageUrl!" 
             [alt]="selectedEvent()!.title"
             class="event-image"
             (error)="onImageError($event)">
        
        <div class="event-description-full" [innerHTML]="selectedEvent()!.description"></div>
        
        <div class="event-attendance-section" *ngIf="selectedEvent()!.id">
          <div class="attendance-info">
            <h3>RÃ©szvÃ©tel</h3>
            <p>{{ getAttendanceCount(selectedEvent()!.id!) }} fÅ‘ jelÃ¶lte meg, hogy rÃ©szt vesz ezen az esemÃ©nyen.</p>
          </div>
          
                     <div class="attendance-actions">
             <button 
               class="btn btn-calendar"
               (click)="addToGoogleCalendar(selectedEvent()!)"
               title="HozzÃ¡adÃ¡s Google NaptÃ¡rhoz">
               ğŸ“… HozzÃ¡adÃ¡s Google NaptÃ¡rhoz
             </button>
             <button 
               [class]="getAttendanceButtonClass(selectedEvent()!.id!)"
               (click)="toggleAttendance(selectedEvent()!)"
               [disabled]="isLoading()">
               {{ getAttendanceButtonText(selectedEvent()!.id!) }}
             </button>
           </div>
        </div>
      </div>
    </div>
  </div>
</div>


